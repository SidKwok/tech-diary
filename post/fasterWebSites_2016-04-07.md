# 高性能网站建设
## 2016.04.07

唉，百度说过了一面的话这两天会给我打电话，没想到苦苦等了一天还是没有电话。估计是挂了，我的天，面试姐姐还说我面得不错。看来自己还需要继续提高啊。

今天看了一本叫高性能网站建设指南的书，我总结一下构建高性能网站的几个原则吧。

* ### 减少Http请求

因为建立http请求的开销比较大，需要进行三次握手四挥手之类的。常用的方法：CSS Sprites，合并脚本和样式

* ### 使用内容分布式网络(CDN)

内容分布式网络是一组分布在多个不同地理位置的Web服务器，用于更有效地向用户发布内容。它能够选择具有最短相应时间的服务器对用户分发内容。我的理解就是选择离用户最近的那个服务器对用户提供内容。

* ### 添加Expires头

通过Expires头来告诉浏览器什么组件副本可以在某个时间之前使用，所以可以减少重新的请求。

* ### 压缩组件

通过Http请求中的Accept-Encoding来指定压缩的方法。通常是使用gzip，一般是压缩HTML文档，图片和PDF不应该被压缩。

* ### 将样式表放在顶部

因为浏览器会根据顺序进行渲染，如果把样式表放在底部，浏览器会先把DOM树加载完再加载样式，这样子造成的感觉就是先露出赤裸裸的结构，然后才重绘成相应的样子。尽管在时间上的差别不大，但是会对用户造成缓慢的感觉。把样式表放在顶部会有逐步呈现的感觉。

* ### 将脚本放在底部

因为加载js脚本的时候是默认阻塞的，所以脚本会阻塞对其后面内容的呈现。

* ### 避免CSS表达式

CSS表达式的执行次数太多了，每一次页面显示甚至是页面滚动和鼠标移动也会引起运算，无疑拉低了性能。

* ### 使用外部JavaScript和CSS

内置js和css会增加页面大小，而且通常js和css的文件都比较大，如果都在一个页面上面设计肯定是不妥的。而且历览器会缓存外部js和css文件，二次访问就可以减少http请求。

* ### 减少DNS查找

* ### 精简JavaScript

也就是压缩js文件，去除不必要的字符。

* ### 避免重定向

* ### 移除重复脚本

* ### 配置ETag

* ### 使Ajax可缓存

这个有点矇，感觉就是在预测用户可能的操作，提前把Ajax的结果缓存下来。


天啊，在我写这篇笔记的时候收到了网易的现场面试通知，心情又是激动又是方啊！
